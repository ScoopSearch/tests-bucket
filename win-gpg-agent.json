{
    "version": "1.2.2",
    "description": "Simple set of tools to make working with GPG and SSH keys easier on Windows 10.",
    "homepage": "https://github.com/rupor-github/win-gpg-agent",
    "license": "Apache-2.0",
    "notes": [
        "win-gpg-agent is configured to expose cygwin socket on SSH_AUTH_SOCK.",
        "You can edit \"$dir\\agent-gui.conf\" according to your needs."
    ],
    "pre_install": [
        "if (!(Test-Path \"$dir\\agent-gui.conf\")) {",
        "  $content = \"gpg:`r`n\"",
        "  $content += \"  install_path: \"\"`$`{USERPROFILE`}\\\\scoop\\\\apps\\\\gnupg\\\\current\"\"`r`n\"",
        "  $content += \"  homedir: \"\"`$`{USERPROFILE`}\\\\scoop\\\\apps\\\\gnupg\\\\current\\\\home\"\"`r`n\"",
        "  $content += \"gui:`r`n\"",
        "  $content += \"  debug: false`r`n\"",
        "  $content += \"  setenv: true`r`n\"",
        "  $content += \"  openssh: cygwin`r`n\"",
        "  $content += \"  # Comment line above and uncomment lines below to enable native SSH_AUTH_SOCK socket`r`n\"",
        "  $content += \"  #openssh: native`r`n\"",
        "  $content += \"  #pipe_name: \\\\\\\\.\\\\pipe\\\\openssh-ssh-agent`r`n\"",
        "  $content += \"  ignore_session_lock: false`r`n\"",
        "  $content += \"  deadline: 1m`r`n\"",
        "  $content += \"  homedir: \"\"`$`{USERPROFILE`}\\\\scoop\\\\apps\\\\gnupg\"\"`r`n\"",
        "  $content += \"  gclpr:`r`n\"",
        "  $content += \"    port: 2850`r`n\"",
        "  $content | Set-Content \"$dir\\agent-gui.conf\" -Encoding ASCII",
        "}"
    ],
    "post_install": "if (!(Test-Path \"$(appdir gnupg)\\current\\bin\\gpg-agent.exe\")) {  Write-Warning \"snoop package 'gnupg' doesn't appear to be installed. 'agent-gui.conf' should be updated manually with gnupg path.\" }",
    "url": "https://github.com/rupor-github/win-gpg-agent/releases/download/v1.2.2/win-gpg-agent.zip",
    "hash": "68D90035FB0C34C5F077FFBCC34E4AD37E4C6AB7EBD82F63C2AAB0DF5B8ADFDC",
    "persist": "agent-gui.conf",
    "checkver": "github",
    "autoupdate": {
        "url": "https://github.com/rupor-github/win-gpg-agent/releases/download/v$version/win-gpg-agent.zip"
    }
}
